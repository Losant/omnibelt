const { compose, subtract, __, curry } = require('ramda');
const present = require('present');
const round = require('./round');
const within = require('./within');
const sleep = require('./sleep');
// duration :: Number -> Number -> Number
const duration = curry((start, end) => compose(round(0), subtract(__, start))(end));
const VARIANCE = 10;
const harness = async (timeToSleep) => {
    const withinVariance = within(timeToSleep - VARIANCE, timeToSleep + VARIANCE);
    const start = present();
    await sleep(timeToSleep);
    const end = present();
    const runtime = duration(start, end);
    expect(withinVariance(runtime)).toBe(true);
};
// TODO: test this better
it('sleeps', async () => {
    await harness(750);
    await harness(1000);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xlZXAudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9vbW5pYmVsdC9zbGVlcC50ZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sRUFDSixPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQzdCLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNuQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUVqQyx5Q0FBeUM7QUFDekMsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUNwQixDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUNiLE9BQU8sQ0FDTCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQ1IsUUFBUSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FDcEIsQ0FBQyxHQUFHLENBQUMsQ0FDVCxDQUFDO0FBRUYsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBRXBCLE1BQU0sT0FBTyxHQUFHLEtBQUssRUFBRSxXQUFXLEVBQUUsRUFBRTtJQUNwQyxNQUFNLGNBQWMsR0FBRyxNQUFNLENBQUMsV0FBVyxHQUFHLFFBQVEsRUFBRSxXQUFXLEdBQUcsUUFBUSxDQUFDLENBQUM7SUFFOUUsTUFBTSxLQUFLLEdBQUcsT0FBTyxFQUFFLENBQUM7SUFDeEIsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDekIsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7SUFDdEIsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVyQyxNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdDLENBQUMsQ0FBQztBQUVGLHlCQUF5QjtBQUN6QixFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssSUFBSSxFQUFFO0lBQ3RCLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RCLENBQUMsQ0FBQyxDQUFDIn0=